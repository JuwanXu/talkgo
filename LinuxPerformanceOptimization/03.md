## 经常说的 CPU 上下文切换是什么意思？（上）

Linux 是一个多任务操作系统，它支持远大于 CPU 数量的任务同时运行。当然，这些任务实际上并不是真的在同时运行，而是因为系统在很短的时间内，将 CPU 轮流分配给它们，造成多任务同时运行的错觉，从而导致系统负载升高。

CPU 运行任务的必须依赖环境：**`CPU 寄存器和程序计数器（Program Counter，PC）`**，也被叫做 **`CPU 上下文`**

- CPU 寄存器：CPU 内置的容量小、但速度极快的内存
- 程序计数器：用来存储 CPU 正在执行的指令位置、或者即将执行的下一条指令位置

### CPU 上下文切换

先把前一个任务的 CPU 上下文（也就是 CPU 寄存器和程序计数器）保存起来，然后加载新任务的上下文到这些寄存器和程序计数器，最后再跳转到程序计数器所指的新位置，运行新任务。而这些保存下来的上下文，**`会存储在系统内核中`**，并在任务重新调度执行时再次加载进来。这样就能保证任务原来的状态不受影响，让任务看起来还是连续运行。

**根据任务的不同，CPU 的上下文切换就可以分为几个不同的场景，也就是 `进程上下文切换`、`线程上下文切换`以及`中断上下文切换`。**

### 进程上下文切换

### 线程上下文切换

### 中断上下文切换
